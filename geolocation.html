<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location</title>
    <style>
*{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body{
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}
button{
    font-size: 20px;
    padding: 25px 46px;
    background-color: aliceblue;
    border: 2px solid black;
    outline: none;
}

    </style>
</head>

<body>
    <button>Detect Your Location</button>








    <script>
const button=document.querySelector("Button");
button.addEventListener("click", () =>{
if(navigator.geolocation){
    button.innerText = "Allow to detect location";
    navigator.geolocation.getCurrentPosition(onSuccess,onError);
}else{
    button.innerText="Browser Not Support";
}
});
function onSuccess(position){
    button.innerText = "Detecting Yoyr Location";
    
// console.log(latitude,longitude);
let {latitude,longitude}=position.coords;
fetch(`https://api.opencagedata.com/geocode/v1/json?q=${latitude}+${longitude}&key=d36dbe0a4ff84607822ee391e99aa0c5`)
    .then(response => response.json()).then(response =>{
        let allDetails = response.results[0].components;
        console.table(allDetails);
        let {neighbourhood, postcode, country} = allDetails;
        button.innerText = `${neighbourhood}, ${postcode}, ${country}`;
    }).catch(()=>{
        button.innerText = "Something went wrong";
    });

}

function onError(error){
  if(error.code == 1){
    button.innerText="You Denied the Request";
  }
  else if(error.code == 2){
    button.innerText="Location Not Available";
  }else{
    button.innerText="Something went Wrong";
  }
  button.setAttribute("disabled","true");
}

    </script>
    
</body>
</html>